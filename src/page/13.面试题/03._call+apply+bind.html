<!--
 * @Description: call+apply+bind
 * @Author: xiao.zhang
 * @Date: 2020-12-28 14:55:00
 * @LastEditors: xiao.zhang
 * @LastEditTime: 2021-01-05 14:35:46
-->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      /***
       * call、apply、bind
       * 每个函数对象都有call、apply、bind方法
       * 使用场景：改变this指向
       * call、apply、bind区别：call、apply是立即执行，bind是返回一个函数
       * 第一个参数：设置null/undefined,this指向当前执行环境的上下文
       */
      const dd = {
        name: 'zx',
        age: 19,
        getMoney: function () {
          // console.log('this', this)
        },
      }

      const newObj = {
        name: 'zxc',
      }

      dd.getMoney.call(null) //window
      dd.getMoney.call(newObj) //newObj
    </script>

    <script>
      /*
       * call 和 apply和bind区别
       * 第一个参数都是 this 的指向对象
       * 第二个参数call是单个传入，apply是传入的数组
       * bind和call的入参一样，但是bind返回一个函数
       */
      const testCallObj = {
        name: 'zxc',
        getAge: function (name1, name2) {
          console.log('testCallObj', this, name1, name2)
          console.log('testCallObj2', this, [...arguments])
        },
      }
      testCallObj.getAge.call({ name: 'xxxx' }, { name1: 'vv' }, 2222)
      testCallObj.getAge.apply({ name: 'cccc' }, [{ name1: 'vv' }, 111])
    </script>

    <script>
      /**
       * 手写call
       */
      Function.prototype.call1 = function (context) {}

      function test() {
        console.log(this)
      }
      // test()
      test.call1({ name: 1122 })
    </script>
  </body>
</html>
